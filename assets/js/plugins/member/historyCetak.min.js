/*** INI PLUGIN HISTORY CETAK 
 * ini terhubung dengan plugin widget.min.js -> fn.initHistory
*/

(function($) {
    $.fn.historyCetak = function(onProcess) {
        $(this).html('');
        let listApp = $(`<ul class="list-group"></ul>`).appendTo(this);
        $.post('history',{token:$.sessionHandler().get('token')}).done((response)=>{
            response.result.forEach(list => {
            let listElement = $(`<li class="tooltip-container no-style">
                        <div data-id="${list.id}" class="tooltip-content">
                            ${list.tanggal + ' ' + list.keperluan}
                        </div>
                        <i class="icon icon-sli-user${list.gender==2?'-female':''}"></i><span>${list.nama}</span>
                    </li>`).appendTo(listApp);
                    listElement.eventTooltips();
                    if(typeof onProcess === 'function')
                        onProcess(listElement.find('.tooltip-content'))
            })
        })
    };
})(jQuery);